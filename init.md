# 股票数据可视化项目技术方案

## 📋 项目概述

一个基于 Next.js 14（App Router）前端和 NestJS 后端的股票数据可视化工具，使用 SQLite3 作为数据源，通过 Lightweight Charts 实现专业级 K 线图展示。项目采用前后端分离架构。

---

## 🎯 核心功能

### 1. **数据展示功能**
- 专业 K 线图（蜡烛图）展示
- 历史pe pb 曲线图

### 2. **交互功能**
- 图表缩放（鼠标滚轮）
- 时间范围拖拽
- 十字光标查看详细数据
- 图表类型切换
- 技术指标开关

### 3. **数据管理**
- 股票代码搜索
- 自选股管理
- 历史数据查询
- 数据导出功能

### 4. **用户界面**
- 响应式设计（支持桌面和移动端）


---

## 🏗️ 技术架构

### **整体架构**
```
┌─────────────────────────────────────────────┐
│                  用户浏览器                   │
│    ┌────────────────────────────────────┐   │
│    │    Next.js 14 前端 (App Router)    │   │
│    │    • Lightweight Charts 图表       │   │
│    │    • Tailwind CSS 样式             │   │
│    │    • 客户端状态管理                │   │
│    └────────────────────────────────────┘   │
└──────────────────────┬──────────────────────┘
                       │ HTTP/HTTPS (RESTful API)
┌──────────────────────▼──────────────────────┐
│              NestJS 后端服务                 │
│    ┌────────────────────────────────────┐   │
│    │    REST API 控制器                 │   │
│    │    • 数据服务层                    │   │
│    │    • 业务逻辑层                    │   │
│    │    • TypeORM 数据访问层            │   │
│    └────────────────────────────────────┘   │
└──────────────────────┬──────────────────────┘
                       │
┌──────────────────────▼──────────────────────┐
│               SQLite3 数据库                  │
│    ┌────────────────────────────────────┐   │
│    │    stocks.db 数据文件              │   │
│    │    • TypeORM 连接                  │   │
│    │    • 数据访问层                    │   │
│    │    • 查询性能优化                  │   │
│    └────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
```

### **数据流设计**
1. 用户请求 → Next.js 前端组件
2. 前端调用 NestJS API → RESTful 接口
3. NestJS 服务查询数据库 → 返回 JSON 数据
4. 前端渲染图表 → 用户交互

---

## 🚀 技术栈

### **前端 (Next.js 14)**
- **框架**: Next.js 14 (App Router)
- **UI 库**: React 18, React Hooks
- **图表**: Lightweight Charts (TradingView)
- **样式**: Tailwind CSS + Headless UI
- **状态管理**: Zustand / React Context
- **HTTP 客户端**: Axios
- **构建工具**: Vite (可选)

### **后端 (NestJS)**
- **框架**: NestJS 10+
- **ORM**: TypeORM
- **数据库驱动**: sqlite3
- **API 文档**: Swagger/OpenAPI
- **验证**: class-validator, class-transformer
- **配置**: @nestjs/config
- **缓存**: Redis (可选，用于缓存热门股票数据)

### **数据库**
- **数据库**: SQLite3
- **文件**: stocks.db
- **工具**: TypeORM 迁移和种子

### sqlite3数据库元数据说明
见db.md文件


